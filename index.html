<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>สรุปขั้นตอน HW05 - Superset + ClickHouse</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.7;
      padding: 30px;
      background: #f9f9f9;
      color: #222;
    }
    h1, h2 {
      color: #2a5d84;
    }
    code {
      background-color: #e8e8e8;
      padding: 2px 4px;
      border-radius: 4px;
    }
    pre {
      background: #eee;
      padding: 10px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h1>HW05 - Superset & ClickHouse Integration</h1>

  <h2>1. ติดตั้ง Superset บน WSL</h2>
  <pre><code>
sudo apt update && sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-venv libsasl2-dev libldap2-dev libpq-dev

python3 -m venv superset-env
source superset-env/bin/activate

pip install --upgrade pip setuptools wheel
pip install apache-superset==3.0.2
pip install marshmallow==3.19.0
  </code></pre>

  <h2>2. สร้างไฟล์ <code>superset_config.py</code></h2>
  <pre><code>
SECRET_KEY = 'your_random_secret_key'
  </code></pre>
  <p>และตั้งค่า environment variable:</p>
  <pre><code>
export FLASK_APP=superset
export SUPERSET_CONFIG_PATH=~/superset_config.py
  </code></pre>

  <h2>3. Setup Superset</h2>
  <pre><code>
superset db upgrade
superset init
superset fab create-admin
superset run -p 8088
  </code></pre>
  <p>เข้าใช้งานที่ <code>http://localhost:8088</code></p>

  <h2>4. ติดตั้ง ClickHouse (ผ่าน Docker)</h2>
  <pre><code>
docker run -d --name clickhouse-server -p 9000:9000 -p 8123:8123 yandex/clickhouse-server
  </code></pre>

  <h2>5. สร้างตารางและนำเข้าข้อมูลจาก HW04</h2>
  <pre><code>
CREATE TABLE students (
    id UInt32,
    name String,
    score Float32
) ENGINE = MergeTree()
ORDER BY id;

INSERT INTO students VALUES (1, 'Alice', 89.5), (2, 'Bob', 76.0);
  </code></pre>

  <h2>6. เชื่อมต่อ Superset กับ ClickHouse</h2>
  <p>ในหน้า UI Superset เพิ่ม Database ด้วย URI:</p>
  <pre><code>clickhouse+native://default:@localhost:9000/default</code></pre>

  <h2>7. สร้าง Dashboard จาก ClickHouse</h2>
  <p>สร้าง Dataset → Explore → Chart → Dashboard</p>
  <p>สามารถบันทึกภาพผลงานเพื่อแนบใน README ได้</p>

  <h2>8. สรุป</h2>
  <ul>
    <li>ติดตั้งและตั้งค่า Superset สำเร็จ</li>
    <li>นำข้อมูลจาก HW4 เข้า ClickHouse</li>
    <li>สร้าง Dashboard บน Superset ได้สำเร็จ</li>
  </ul>
</body>
</html>
